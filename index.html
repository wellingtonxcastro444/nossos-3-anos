<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WellingtonFlix ‚Äî 3 Anos de N√≥s</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0b0b;
      --bg2:#000;
      --surface:rgba(255,255,255,.06);
      --border:rgba(255,255,255,.10);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.68);
      --red:#e50914;
      --shadow:0 28px 90px rgba(0,0,0,.70);
      --radius:14px;
      --max: 1200px;
    }

    *{ box-sizing:border-box; margin:0; padding:0; }
    html{ scroll-behavior:smooth; }
    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-x:hidden;
    }

    a{ color:inherit; text-decoration:none; }
    button, input{ font:inherit; }
    ::-webkit-scrollbar{ width:8px; height:8px; }
    ::-webkit-scrollbar-track{ background:transparent; }
    ::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.18); border-radius:999px; }

    :focus-visible{
      outline: 3px solid rgba(229,9,20,.45);
      outline-offset: 3px;
      border-radius: 10px;
    }

    .container{
      width: min(100% - 32px, var(--max));
      margin: 0 auto;
    }

    /* ========= LOGIN ========= */
    .login{
      position: fixed;
      inset: 0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px;
      background:
        linear-gradient(to bottom, rgba(0,0,0,.75), rgba(0,0,0,.92)),
        url("fotocapa.jpeg") center/cover no-repeat;
      z-index: 1000;
    }
    .login::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(1000px 520px at 50% 18%, rgba(255,255,255,.10), transparent 60%),
        radial-gradient(1200px 600px at 10% 10%, rgba(229,9,20,.12), transparent 60%);
      pointer-events:none;
    }
    .login-card{
      position:relative;
      z-index:2;
      width:min(92vw, 430px);
      background: rgba(0,0,0,.75);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 10px;
      box-shadow: var(--shadow);
      padding: 42px 34px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom: 18px;
      font-weight: 900;
      letter-spacing: 1px;
    }
    .brand-badge{
      color: var(--red);
      font-weight: 900;
      font-size: 1.15rem;
      letter-spacing: 1px;
    }
    .brand-sub{
      color: rgba(255,255,255,.55);
      font-size: .85rem;
      letter-spacing: .6px;
    }
    .login h1{
      font-size: 1.45rem;
      margin-bottom: 8px;
    }
    .login p{
      color: rgba(255,255,255,.65);
      font-size: .92rem;
      margin-bottom: 18px;
    }
    .field{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .input{
      width: 100%;
      padding: 14px 14px;
      border-radius: 6px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.92);
    }
    .btn{
      width:100%;
      padding: 14px 16px;
      border-radius: 6px;
      border: 1px solid rgba(0,0,0,.2);
      background: var(--red);
      color: #fff;
      font-weight: 900;
      letter-spacing: .3px;
      cursor:pointer;
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      transition: transform .15s ease, filter .2s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover{ transform: translateY(-1px); filter: brightness(1.05); }
    .btn:active{ transform: translateY(1px); }
    .err{
      margin-top: 12px;
      color: rgba(255,255,255,.70);
      font-size: .9rem;
      opacity:0;
      transition: opacity .25s ease;
    }

    /* ========= APP SHELL ========= */
    .app{
      display:none;
      min-height: 100vh;
      background: linear-gradient(to bottom, rgba(0,0,0,.65), transparent 45%), var(--bg);
    }

    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(0,0,0,.92), rgba(0,0,0,.35));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }

    .topbar-inner{
      height: 64px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
    }

    .top-left{
      display:flex; align-items:center; gap: 16px;
    }
    .logo{
      font-weight: 900;
      letter-spacing: 1px;
      color: var(--red);
    }
    .nav{
      display:flex; gap: 14px;
      color: rgba(255,255,255,.80);
      font-weight: 600;
      font-size: .92rem;
    }
    .nav a{ opacity:.85; }
    .nav a:hover{ opacity:1; }

    .top-right{
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .search{
      width: min(52vw, 380px);
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 10px;
      background: rgba(0,0,0,.35);
    }
    .search input{
      width:100%;
      border:none;
      outline:none;
      background: transparent;
      color: rgba(255,255,255,.92);
    }
    .chip{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.82);
      padding: 8px 10px;
      border-radius: 10px;
      cursor:pointer;
      font-weight: 800;
      font-size: .85rem;
      -webkit-tap-highlight-color: transparent;
    }
    .chip:hover{ filter: brightness(1.06); }

    /* ========= HERO / BILLBOARD ========= */
    .hero{
      position: relative;
      min-height: 84vh;
      display:flex;
      align-items:flex-end;
      padding: 22px;
      overflow:hidden;
      background: #000;
    }
    .hero-bg{
      position:absolute;
      inset:-5%;
      width:110%;
      height:110%;
      background: url("fotocapa.jpeg") center/cover no-repeat;
      filter: saturate(1.10) contrast(1.05);
      transform: scale(1);
      animation: zoom 24s ease-in-out infinite alternate;
      z-index:0;
    }
    @keyframes zoom{ to{ transform: scale(1.08); } }

    .hero::after{
      content:"";
      position:absolute; inset:0;
      background:
        linear-gradient(to top, rgba(0,0,0,.92) 0%, rgba(0,0,0,.45) 55%, rgba(0,0,0,.08) 100%),
        radial-gradient(900px 420px at 25% 60%, rgba(0,0,0,.65), transparent 70%);
      z-index:1;
      pointer-events:none;
    }

    .billboard{
      position: relative;
      z-index:2;
      width: min(92vw, 760px);
      margin-bottom: 10vh;
    }
    .meta{
      font-size:.78rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: rgba(255,255,255,.70);
      margin-bottom: 10px;
      font-weight: 800;
    }
    .title{
      font-size: clamp(2.6rem, 6vw, 4.4rem);
      font-weight: 900;
      letter-spacing: -1px;
      text-shadow: 0 20px 70px rgba(0,0,0,.70);
      margin-bottom: 10px;
    }
    .desc{
      color: rgba(255,255,255,.78);
      max-width: 62ch;
      line-height: 1.55;
      margin-bottom: 18px;
    }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .a-btn{
      border-radius: 10px;
      padding: 12px 16px;
      cursor:pointer;
      font-weight: 900;
      letter-spacing: .2px;
      -webkit-tap-highlight-color: transparent;
      transition: transform .15s ease, filter .2s ease;
      border: 1px solid rgba(255,255,255,.14);
    }
    .a-btn:hover{ transform: translateY(-1px); filter: brightness(1.05); }
    .a-btn:active{ transform: translateY(1px); }
    .a-play{
      background: var(--red);
      border-color: rgba(0,0,0,.2);
      color:#fff;
    }
    .a-info{
      background: rgba(109,109,110,.35);
      color:#fff;
    }

    /* ========= ROWS / CATALOG ========= */
    .rows{
      padding: 18px 0 90px;
    }
    .row{
      margin-top: 22px;
    }
    .row-head{
      display:flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }
    .row-title{
      font-size: 1.2rem;
      font-weight: 900;
      color: rgba(255,255,255,.92);
    }
    .row-sub{
      color: rgba(255,255,255,.55);
      font-size: .85rem;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .rail{
      display:flex;
      overflow-x:auto;
      gap: 14px;
      padding: 6px 2px 18px;
      scrollbar-width: none;
      -webkit-overflow-scrolling: touch;
    }
    .rail::-webkit-scrollbar{ display:none; }

    .card{
      width: 220px;
      flex: 0 0 auto;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .thumb{
      width:100%;
      height: 124px;
      object-fit: cover;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      filter: saturate(1.06) contrast(1.03);
      transform: translateZ(0);
      transition: transform .18s ease, filter .18s ease;
      display:block;
    }
    .card:hover .thumb{
      transform: scale(1.12);
      filter: brightness(1.06);
    }
    .cap{
      margin-top: 8px;
      font-weight: 700;
      font-size: .86rem;
      color: rgba(255,255,255,.80);
      padding-left: 2px;
    }

    /* ========= MODAL (DETALHES) ========= */
    .modal{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.72);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 22px;
      z-index: 200;
    }
    .modal-card{
      width: min(96vw, 900px);
      max-height: min(92vh, 860px);
      background: rgba(20,20,20,.94);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .modal-hero{
      position: relative;
      height: 300px;
      background: #000;
      overflow:hidden;
    }
    .modal-hero::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(to top, rgba(20,20,20,.98) 0%, rgba(20,20,20,.15) 60%, rgba(0,0,0,.10) 100%);
      pointer-events:none;
    }
    .modal-bg{
      position:absolute;
      inset:-5%;
      width:110%;
      height:110%;
      object-fit: cover;
      filter: saturate(1.10) contrast(1.05);
      transform: scale(1);
    }
    .modal-top{
      position:absolute;
      left: 18px;
      bottom: 18px;
      right: 62px;
      z-index: 2;
    }
    .modal-top .modal-title{
      font-size: 1.8rem;
      font-weight: 900;
      margin-bottom: 6px;
    }
    .modal-top .modal-meta{
      color: rgba(255,255,255,.65);
      font-size: .85rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      font-weight: 800;
    }
    .close{
      position:absolute;
      top: 14px;
      right: 14px;
      width: 42px;
      height: 42px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      color: rgba(255,255,255,.92);
      cursor:pointer;
      font-weight: 900;
      -webkit-tap-highlight-color: transparent;
    }
    .close:hover{ filter: brightness(1.06); }

    .modal-body{
      padding: 18px;
      overflow:auto;
      max-height: calc(92vh - 300px);
    }
    .modal-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    .panel{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      padding: 14px;
    }

    .letter-wrap{
      position: relative;
      min-height: 220px;
    }
    .quill{
      position:absolute;
      right: 14px;
      top: 18px;
      width: 54px;
      height:auto;
      opacity: 0;
      transform: rotate(-18deg);
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.45));
      pointer-events:none;
      transition: opacity .25s ease;
    }
    .writing .quill{
      opacity: 1;
      animation: scribble .22s infinite ease-in-out;
    }
    @keyframes scribble{
      0%{ transform: rotate(-18deg) translateY(0); }
      50%{ transform: rotate(-16deg) translateY(2px); }
      100%{ transform: rotate(-18deg) translateY(0); }
    }

    .letter{
      font-family: "Caveat", cursive;
      font-size: 1.45rem;
      line-height: 1.5;
      color: rgba(255,255,255,.88);
      white-space: pre-wrap;
      padding-right: 70px;
    }
    .cursor::after{
      content:"|";
      color: rgba(229,9,20,.85);
      animation: blink 1s step-end infinite;
    }
    @keyframes blink{ 50%{ opacity: 0; } }

    .modal-actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .mini{
      border-radius: 10px;
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(109,109,110,.35);
      color:#fff;
      font-weight: 900;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .mini:hover{ filter: brightness(1.05); }

    /* ========= FOOTER ========= */
    footer{
      border-top: 1px solid rgba(255,255,255,.10);
      background:#000;
      padding: 40px 0 70px;
      color: rgba(255,255,255,.70);
      text-align:center;
    }

    /* ========= Responsive ========= */
    @media (max-width: 860px){
      .nav{ display:none; }
      .search{ width: min(70vw, 420px); }
      .modal-hero{ height: 260px; }
      .modal-body{ max-height: calc(92vh - 260px); }
    }
    @media (max-width: 520px){
      .login-card{ padding: 34px 22px; }
      .search{ width: min(74vw, 320px); }
      .card{ width: 200px; }
      .thumb{ height: 118px; }
      .quill{ width: 46px; }
      .letter{ font-size: 1.28rem; padding-right: 56px; }
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; scroll-behavior: auto !important; }
    }
  </style>
</head>

<body>

  <!-- LOGIN -->
  <section class="login" id="login">
    <div class="login-card">
      <div class="brand">
        <div class="brand-badge">WELLINGTONFLIX</div>
        <div class="brand-sub">Uma produ√ß√£o exclusiva</div>
      </div>

      <h1>Entrar</h1>
      <p>Digite a palavra-chave para acessar o cat√°logo.</p>

      <div class="field">
        <input id="pass" class="input" type="password" placeholder="Senha" autocomplete="off" aria-label="Senha" />
        <button id="loginBtn" class="btn">ENTRAR</button>
      </div>

      <div id="loginErr" class="err">Senha incorreta. Tente novamente.</div>
    </div>
  </section>

  <!-- APP -->
  <main class="app" id="app">
    <!-- Topbar -->
    <header class="topbar">
      <div class="container topbar-inner">
        <div class="top-left">
          <div class="logo">WELLINGTONFLIX</div>
          <nav class="nav">
            <a href="#inicio">In√≠cio</a>
            <a href="#catalogo">Cat√°logo</a>
            <a href="#minha-lista" id="minhaListaLink">Minha lista</a>
          </nav>
        </div>

        <div class="top-right">
          <div class="search" title="Pesquisar">
            <span style="opacity:.7">üîé</span>
            <input id="q" placeholder="Buscar no cat√°logo..." />
          </div>
          <button class="chip" id="toggleList">‚òÖ Lista</button>
        </div>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero" id="inicio">
      <div class="hero-bg" aria-hidden="true"></div>

      <div class="container">
        <div class="billboard">
          <div class="meta">FILME ‚Ä¢ ROMANCE ‚Ä¢ EDI√á√ÉO ESPECIAL</div>
          <div class="title">3 Anos de N√≥s</div>

          <!-- Carta como descri√ß√£o (estilo Netflix) -->
          <div class="desc" id="heroDesc">
            <!-- preenchido pelo JS com um trecho curto da carta -->
          </div>

          <div class="actions">
            <button class="a-btn a-play" id="btnPlay">‚ñ∂ Assistir</button>
            <button class="a-btn a-info" id="btnInfo">‚Ñπ Mais informa√ß√µes</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Catalog -->
    <section class="rows" id="catalogo">
      <div class="container">

        <div class="row" id="row-continue">
          <div class="row-head">
            <div class="row-title">Continuar assistindo</div>
            <div class="row-sub">Seu filme principal</div>
          </div>
          <div class="rail" id="railContinue"></div>
        </div>

        <div class="row" id="row-memories">
          <div class="row-head">
            <div class="row-title">Cole√ß√£o de Mem√≥rias</div>
            <div class="row-sub">Deslize para ver mais</div>
          </div>
          <div class="rail" id="railMemories"></div>
        </div>

        <div class="row" id="row-best">
          <div class="row-head">
            <div class="row-title">Destaques</div>
            <div class="row-sub">Cl√°ssicos do nosso cat√°logo</div>
          </div>
          <div class="rail" id="railBest"></div>
        </div>

        <div class="row" id="minha-lista" style="display:none;">
          <div class="row-head">
            <div class="row-title">Minha Lista</div>
            <div class="row-sub">Seus favoritos</div>
          </div>
          <div class="rail" id="railList"></div>
        </div>

      </div>
    </section>

    <footer>
      <div class="container">
        <div style="font-weight:900; color: rgba(255,255,255,.86);">Malfeito feito. ‚ú®</div>
        <div style="margin-top:10px; font-style: italic; color: rgba(255,255,255,.85);">"Always."</div>
        <div style="margin-top:8px;">27 de Fevereiro de 2026</div>
      </div>
    </footer>
  </main>

  <!-- MODAL DETALHES (carta completa) -->
  <section class="modal" id="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="Detalhes do t√≠tulo">
      <button class="close" id="closeModal" aria-label="Fechar">‚úï</button>

      <div class="modal-hero">
        <img class="modal-bg" id="modalBg" src="fotocapa.jpeg" alt="" />
        <div class="modal-top">
          <div class="modal-title" id="modalTitle">3 Anos de N√≥s</div>
          <div class="modal-meta">ROMANCE ‚Ä¢ 1h 36min ‚Ä¢ 3 anos juntos</div>
        </div>
      </div>

      <div class="modal-body">
        <div class="modal-grid">
          <div class="panel">
            <div style="font-weight:900; margin-bottom:8px;">Descri√ß√£o</div>
            <div style="color: rgba(255,255,255,.75); line-height: 1.55;">
              Um cat√°logo inteiro de mem√≥rias‚Ä¶ e um filme principal onde a carta diz tudo o que as palavras normais n√£o d√£o conta.
            </div>

            <div class="modal-actions">
              <button class="mini" id="btnType">ü™∂ Ler com pena</button>
              <button class="mini" id="btnInstant">üìÑ Mostrar tudo</button>
              <button class="mini" id="btnFav">‚òÖ Adicionar √† lista</button>
            </div>
          </div>

          <div class="panel letter-wrap" id="letterWrap">
            <img id="quill" class="quill" src="pena.png" alt="" aria-hidden="true"
                 onerror="this.style.display='none'">
            <div id="letter" class="letter cursor"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    // =============================
    // CONFIG
    // =============================
    const CORRECT_PASS = "catitel";

    const letterString =
`Minha querida Fl√°via,

Come√ßamos nossa hist√≥ria h√° 3 anos (h√° exatamente 1.096 dias). Nesses dias, vivemos tudo o que h√° de melhor. √â claro que nem tudo s√£o flores; tivemos momentos dif√≠ceis em que tivemos que ser fortes. Por√©m, o nosso amor √© maior que qualquer desafio que esteja em nosso caminho. Somos o pilar e o porto seguro um do outro, nos apoiando em todos os momentos, incentivando, acreditando e orando para que tudo d√™ certo em nossas vidas.

Juntos, somos eu e voc√™, e voc√™ e eu (√© √≥bvio, kkk). J√° temos nossa fam√≠lia: n√≥s dois e nossas filhas pets, Safira e Bela, que s√£o nossas crian√ßas que tanto amamos. E claro que, em um futuro n√£o t√£o distante, teremos nossos filhos, como sempre falamos.

Saiba que voc√™ √© a pessoa que pedi a Deus, a pessoa que est√° comigo desde o in√≠cio. Quero ter voc√™ para sempre em minha vida (mesmo depois da √∫ltima batida do meu cora√ß√£o e do meu √∫ltimo suspiro). E, se existirem outras vidas, eu te procuro em cada uma delas.

Mas, antes de isso acontecer, quero viver tudo o que h√° de melhor com voc√™. Afinal, temos 1.096 dias de amor, amizade, companheirismo, fidelidade, respeito e brincadeiras. Quero passar anos e anos ao lado da mulher incr√≠vel que voc√™ √©... Se eu fosse mencionar todas as suas qualidades, passaria horas escrevendo cada detalhe que voc√™ tem. Mas eu vejo que a sua maior qualidade √© ser voc√™ mesma (acho que ficou confuso aqui, risada escandalosa ksksk).

Ent√£o, acho que nesta breve carta consegui expressar o que foram esses 3 anos ao seu lado, a cada dia te amando mais e mais.

Hoje eu te amo mais que ontem, e amanh√£ te amarei mais que hoje. Eu te amo!

Wellington Andrade de Castro.`;

    // Cat√°logo (ajuste t√≠tulos como quiser)
    const catalog = [
      { id:"capa", title:"3 Anos de N√≥s", img:"fotocapa.jpeg", tag:"Filme principal", featured:true },
      { id:"f1", title:"Lembran√ßas", img:"foto1.jpeg" },
      { id:"f2", title:"Nossa primeira foto", img:"foto2.jpeg" },
      { id:"f4", title:"Amo voc√™", img:"foto4.jpeg" },
      { id:"f5", title:"Nosso dia", img:"foto5.jpeg" },
      { id:"f6", title:"Sempre juntos", img:"foto6.jpeg" },
      { id:"f7", title:"Meu amor", img:"foto7.jpeg" },
      { id:"f8", title:"Destaque", img:"foto8.jpeg", tag:"Destaque" },
      { id:"f9", title:"Perfeitos", img:"foto9.jpeg" },
      { id:"f10", title:"Momentos √∫nicos", img:"foto10.jpeg" },
      { id:"f11", title:"Sintonia", img:"foto11.jpeg" },
      { id:"f12", title:"N√≥s dois", img:"foto12.jpeg" },
      { id:"f13", title:"Sorrisos", img:"foto13.jpeg" },
      { id:"f14", title:"Meu porto seguro", img:"foto14.jpeg" },
      { id:"f15", title:"Cumplicidade", img:"foto15.jpeg" },
      { id:"f16", title:"Completos", img:"foto16.jpeg" },
      { id:"f17", title:"Para sempre", img:"foto17.jpeg" },
      { id:"f18", title:"Meu dengo", img:"foto18.jpeg" },
      { id:"f19", title:"Alegria", img:"foto19.jpeg" },
      { id:"f20", title:"Nosso mundo", img:"foto20.jpeg" },
      { id:"f21", title:"Sempre n√≥s", img:"foto21.jpeg" },
      { id:"f22", title:"Tudo pra mim", img:"foto22.jpeg" },
    ];

    // =============================
    // LOGIN
    // =============================
    const login = document.getElementById("login");
    const app = document.getElementById("app");
    const pass = document.getElementById("pass");
    const loginBtn = document.getElementById("loginBtn");
    const loginErr = document.getElementById("loginErr");

    function doLogin(){
      if(pass.value.trim().toLowerCase() === CORRECT_PASS){
        login.style.opacity = "0";
        setTimeout(()=>{
          login.style.display = "none";
          app.style.display = "block";
          document.body.style.overflowY = "auto";
          initApp();
        }, 450);
      }else{
        loginErr.style.opacity = "1";
        pass.value = "";
        setTimeout(()=> loginErr.style.opacity = "0", 2200);
      }
    }
    loginBtn.addEventListener("click", doLogin);
    pass.addEventListener("keypress", (e)=>{ if(e.key === "Enter") doLogin(); });

    // =============================
    // APP INIT
    // =============================
    const heroDesc = document.getElementById("heroDesc");
    const railContinue = document.getElementById("railContinue");
    const railMemories = document.getElementById("railMemories");
    const railBest = document.getElementById("railBest");
    const q = document.getElementById("q");
    const btnInfo = document.getElementById("btnInfo");
    const btnPlay = document.getElementById("btnPlay");

    const modal = document.getElementById("modal");
    const closeModal = document.getElementById("closeModal");
    const modalBg = document.getElementById("modalBg");
    const modalTitle = document.getElementById("modalTitle");
    const letterEl = document.getElementById("letter");
    const letterWrap = document.getElementById("letterWrap");
    const quill = document.getElementById("quill");
    const btnType = document.getElementById("btnType");
    const btnInstant = document.getElementById("btnInstant");
    const btnFav = document.getElementById("btnFav");

    const railList = document.getElementById("railList");
    const rowList = document.getElementById("minha-lista");
    const toggleList = document.getElementById("toggleList");

    let myList = new Set(JSON.parse(localStorage.getItem("wf_my_list") || "[]"));
    let typing = false;
    let idx = 0;
    let typeTimer = null;

    function excerpt(text, max=190){
      const t = text.replace(/\s+/g, " ").trim();
      return t.length > max ? (t.slice(0, max).trim() + "‚Ä¶") : t;
    }

    function cardHTML(item){
      const safeTitle = item.title || "Sem t√≠tulo";
      return `
        <div class="card" data-id="${item.id}" data-title="${safeTitle.toLowerCase()}">
          <img class="thumb" src="${item.img}" alt="${safeTitle}" loading="lazy"
               onerror="this.style.opacity=.3; this.title='Imagem n√£o encontrada: ${item.img}'">
          <div class="cap">${safeTitle}</div>
        </div>
      `;
    }

    function renderRail(el, items){
      el.innerHTML = items.map(cardHTML).join("");
    }

    function initApp(){
      // Hero description = trecho da carta (Netflix style)
      heroDesc.textContent = excerpt(letterString, 220);

      // Rails
      renderRail(railContinue, catalog.filter(x=>x.featured).concat(catalog.slice(1,6)));
      renderRail(railMemories, catalog.filter(x=>!x.featured).slice(0, 18));
      renderRail(railBest, catalog.slice().reverse().slice(0, 14));

      renderMyList();

      // Clique nos cards
      document.querySelectorAll(".rail").forEach(rail=>{
        rail.addEventListener("click", (e)=>{
          const card = e.target.closest(".card");
          if(!card) return;
          const id = card.dataset.id;
          openDetails(id);
        });
      });

      // Busca
      q.addEventListener("input", ()=>{
        const term = q.value.trim().toLowerCase();
        filterCatalog(term);
      });

      // Buttons hero
      btnInfo.addEventListener("click", ()=> openDetails("capa"));
      btnPlay.addEventListener("click", ()=> {
        // ‚ÄúAssistir‚Äù = abre detalhes e j√° come√ßa a digitar
        openDetails("capa");
        startTyping();
      });

      // Modal
      closeModal.addEventListener("click", closeDetails);
      modal.addEventListener("click", (e)=>{
        if(e.target === modal) closeDetails();
      });
      window.addEventListener("keydown", (e)=>{
        if(e.key === "Escape" && modal.style.display === "flex") closeDetails();
      });

      // Modal actions
      btnInstant.addEventListener("click", showAll);
      btnType.addEventListener("click", startTyping);
      btnFav.addEventListener("click", ()=>{
        toggleFavorite(currentItemId);
        renderMyList();
        updateFavButton();
      });

      // Lista toggle
      toggleList.addEventListener("click", ()=>{
        const visible = rowList.style.display !== "none";
        rowList.style.display = visible ? "none" : "block";
        if(!visible){
          rowList.scrollIntoView({behavior:"smooth", block:"start"});
        }
      });
    }

    function filterCatalog(term){
      document.querySelectorAll(".card").forEach(c=>{
        const title = c.dataset.title || "";
        const ok = !term || title.includes(term);
        c.style.display = ok ? "block" : "none";
      });
    }

    let currentItemId = "capa";

    function openDetails(id){
      const item = catalog.find(x=>x.id===id) || catalog[0];
      currentItemId = item.id;

      modalBg.src = item.img || "fotocapa.jpeg";
      modalTitle.textContent = item.title || "3 Anos de N√≥s";

      // Reset letter
      stopTyping();
      letterEl.textContent = "";
      letterEl.classList.add("cursor");
      letterWrap.classList.remove("writing");
      if(quill) quill.style.opacity = "";

      modal.style.display = "flex";
      modal.setAttribute("aria-hidden", "false");

      updateFavButton();

      // Se clicou no filme principal, j√° mostra um trechinho inicial
      letterEl.textContent = "";
      idx = 0;
    }

    function closeDetails(){
      stopTyping();
      modal.style.display = "none";
      modal.setAttribute("aria-hidden", "true");
    }

    function showAll(){
      stopTyping();
      letterWrap.classList.remove("writing");
      letterEl.textContent = letterString;
      letterEl.classList.remove("cursor");
    }

    function moveQuill(){
      if(!quill) return;
      // desce conforme texto cresce (aproxima√ß√£o)
      const h = letterEl.scrollHeight;
      const y = Math.min(220, 18 + h * 0.08);
      quill.style.top = y + "px";
    }

    function typeStep(){
      if(idx >= letterString.length){
        typing = false;
        letterEl.classList.remove("cursor");
        letterWrap.classList.remove("writing");
        if(quill) quill.style.opacity = "0";
        return;
      }
      letterEl.textContent += letterString.charAt(idx);
      idx++;
      letterEl.parentElement.scrollTop = letterEl.parentElement.scrollHeight;
      moveQuill();

      typeTimer = setTimeout(typeStep, Math.floor(Math.random()*45)+18);
    }

    function startTyping(){
      if(typing) return;
      typing = true;
      letterEl.textContent = "";
      idx = 0;
      letterEl.classList.add("cursor");
      letterWrap.classList.add("writing");
      if(quill) quill.style.opacity = "1";
      typeStep();
    }

    function stopTyping(){
      typing = false;
      if(typeTimer) clearTimeout(typeTimer);
      typeTimer = null;
    }

    function toggleFavorite(id){
      if(myList.has(id)) myList.delete(id);
      else myList.add(id);
      localStorage.setItem("wf_my_list", JSON.stringify([...myList]));
    }

    function updateFavButton(){
      const isFav = myList.has(currentItemId);
      btnFav.textContent = isFav ? "‚òÖ Na lista" : "‚òÖ Adicionar √† lista";
    }

    function renderMyList(){
      const items = catalog.filter(x=>myList.has(x.id));
      if(items.length === 0){
        rowList.style.display = "none";
        railList.innerHTML = "";
        return;
      }
      railList.innerHTML = items.map(cardHTML).join("");
      // permitir abrir detalhes na lista tamb√©m
      railList.onclick = (e)=>{
        const card = e.target.closest(".card");
        if(!card) return;
        openDetails(card.dataset.id);
      };
    }
  </script>
</body>
</html>